<html>

<head>
  <link rel="stylesheet" href="https://unpkg.com/maplibre-gl/dist/maplibre-gl.css">
  <script src="https://unpkg.com/maplibre-gl/dist/maplibre-gl.js"></script>
  <style>
    #map {
      position: fixed;
      top: 0px;
      left: 0px;
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <div id="map"></div>
  <script>
    var map = new maplibregl.Map({
      container: 'map', // container id
      style: 'https://api.maptiler.com/maps/basic-v2/style.json?key=WT4VsZ6xeluYL5zzsbwL', // style URL
      center: [0, 0], // starting position [lng, lat]
      zoom: 1, // starting zoom
      showTileBoundaries: true,
    });

    map.showTileBoundaries = true;

    map.on('load', () => {
      map.addSource('routes-tiles', {
        type: 'vector',
        tiles: ['http://localhost:1337/tiles/{z}/{x}/{y}.mvt'],
        minzoom: 7,
        maxzoom: 15
      });

      map.addLayer({
        'id': 'route-lines',
        'source-layer': 'layer0',
        'type': 'line',
        'source': 'routes-tiles',
        'filter': ['==', ['geometry-type'], 'LineString'],
        'paint': {
          'line-width': 3,
          'line-color': ['get', 'route_color']
        }
      });

      map.addLayer({
        'id': 'route-stops1',
        'source-layer': 'layer0',
        'type': 'circle',
        'source': 'routes-tiles',
        'filter': ['==', ['geometry-type'], 'Point'],
        'paint': {
          'circle-radius': 6,
          'circle-color': 'black',
        }
      });

      map.addLayer({
        'id': 'route-stops2',
        'source-layer': 'layer0',
        'type': 'circle',
        'source': 'routes-tiles',
        'filter': ['==', ['geometry-type'], 'Point'],
        'paint': {
          'circle-radius': 4,
          'circle-color': 'white',
        }
      });
    });
  </script>
</body>

</html>